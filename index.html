<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google Snake Clone</title>
    <style>
        body {
            background-color: #4a752c; /* Darker green background */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: 'Arial', sans-serif;
            color: white;
        }

        #ui-bar {
            background-color: #4a752c;
            width: 400px;
            display: flex;
            justify-content: space-between;
            padding: 10px 20px;
            box-sizing: border-box;
            font-size: 24px;
            font-weight: bold;
        }

        canvas {
            background-color: #aad751;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            border-radius: 5px;
        }

        .score-box {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .apple-icon {
            width: 24px;
            height: 24px;
            background-color: #e91e63;
            border-radius: 50%;
        }
    </style>
</head>
<body>

    <div id="ui-bar">
        <div class="score-box">
            <div class="apple-icon"></div>
            <span id="score">0</span>
        </div>
        <div>HI: <span id="high-score">0</span></div>
    </div>

    <canvas id="gameCanvas" width="400" height="400"></canvas>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreElement = document.getElementById("score");
        const highScoreElement = document.getElementById("high-score");

        // Game Constants
        const gridSize = 20;
        const tileCount = canvas.width / gridSize;
        
        // Colors
        const GRASS_LIGHT = "#aad751";
        const GRASS_DARK = "#a2d149";
        const SNAKE_HEAD = "#4eba4d";
        const SNAKE_BODY = "#578a34";
        const APPLE = "#e91e63";

        // Game Variables
        let snake = [{x: 10, y: 10}, {x: 10, y: 11}, {x: 10, y: 12}];
        let food = {x: 5, y: 5};
        let dx = 0;
        let dy = -1; // Start moving UP
        let nextDx = 0;
        let nextDy = -1;
        let score = 0;
        let highScore = localStorage.getItem("snakeHighScore") || 0;
        highScoreElement.innerText = highScore;

        // Input Handling
        document.addEventListener("keydown", (e) => {
            switch(e.key) {
                case "ArrowUp":    if (dy === 0) { nextDx = 0; nextDy = -1; } break;
                case "ArrowDown":  if (dy === 0) { nextDx = 0; nextDy = 1; } break;
                case "ArrowLeft":  if (dx === 0) { nextDx = -1; nextDy = 0; } break;
                case "ArrowRight": if (dx === 0) { nextDx = 1; nextDy = 0; } break;
            }
        });

        function gameLoop() {
            update();
            draw();
            setTimeout(gameLoop, 120); // Speed: lower is faster
        }

        function update() {
            dx = nextDx;
            dy = nextDy;

            const head = { x: snake[0].x + dx, y: snake[0].y + dy };

            // Wall Collision
            if (head.x < 0 || head.x >= tileCount || head.y < 0 || head.y >= tileCount) {
                return resetGame();
            }

            // Self Collision
            for (let i = 0; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    return resetGame();
                }
            }

            snake.unshift(head);

            // Food Collision
            if (head.x === food.x && head.y === food.y) {
                score++;
                scoreElement.innerText = score;
                if (score > highScore) {
                    highScore = score;
                    highScoreElement.innerText = highScore;
                    localStorage.setItem("snakeHighScore", highScore);
                }
                placeFood();
            } else {
                snake.pop();
            }
        }

        function draw() {
            // 1. Draw Checkered Background
            for (let row = 0; row < tileCount; row++) {
                for (let col = 0; col < tileCount; col++) {
                    ctx.fillStyle = (row + col) % 2 === 0 ? GRASS_LIGHT : GRASS_DARK;
                    ctx.fillRect(col * gridSize, row * gridSize, gridSize, gridSize);
                }
            }

            // 2. Draw Apple
            ctx.fillStyle = APPLE;
            ctx.beginPath();
            ctx.arc(food.x * gridSize + gridSize/2, food.y * gridSize + gridSize/2, gridSize/2.2, 0, Math.PI * 2);
            ctx.fill();

            // 3. Draw Snake
            snake.forEach((part, index) => {
                const isHead = index === 0;
                ctx.fillStyle = isHead ? SNAKE_HEAD : SNAKE_BODY;
                
                // Rounded segments
                const x = part.x * gridSize;
                const y = part.y * gridSize;
                ctx.fillRect(x + 1, y + 1, gridSize - 2, gridSize - 2);

                if (isHead) {
                    drawEyes(x, y);
                }
            });
        }

        function drawEyes(x, y) {
            ctx.fillStyle = "white";
            const eyeSize = 4;
            // Draw eyes based on direction
            if (dx === 1) { // Right
                ctx.fillRect(x + 12, y + 4, eyeSize, eyeSize);
                ctx.fillRect(x + 12, y + 12, eyeSize, eyeSize);
            } else if (dx === -1) { // Left
                ctx.fillRect(x + 4, y + 4, eyeSize, eyeSize);
                ctx.fillRect(x + 4, y + 12, eyeSize, eyeSize);
            } else if (dy === -1) { // Up
                ctx.fillRect(x + 4, y + 4, eyeSize, eyeSize);
                ctx.fillRect(x + 12, y + 4, eyeSize, eyeSize);
            } else { // Down
                ctx.fillRect(x + 4, y + 12, eyeSize, eyeSize);
                ctx.fillRect(x + 12, y + 12, eyeSize, eyeSize);
            }
        }

        function placeFood() {
            food = {
                x: Math.floor(Math.random() * tileCount),
                y: Math.floor(Math.random() * tileCount)
            };
            // Ensure food doesn't spawn on snake
            snake.forEach(part => {
                if (food.x === part.x && food.y === part.y) placeFood();
            });
        }

        function resetGame() {
            alert("Game Over! Score: " + score);
            snake = [{x: 10, y: 10}, {x: 10, y: 11}, {x: 10, y: 12}];
            dx = 0; dy = -1;
            nextDx = 0; nextDy = -1;
            score = 0;
            scoreElement.innerText = score;
            placeFood();
        }

        placeFood();
        gameLoop();
    </script>
</body>
</html>